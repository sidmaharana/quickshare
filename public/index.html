<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SeamlessShare | Secure File Transfer</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
      @keyframes scanline {
        0% { transform: translateY(-100%); }
        100% { transform: translateY(100vh); }
      }
      @keyframes pulse {
        0% { opacity: 0.3; }
        50% { opacity: 1; }
        100% { opacity: 0.3; }
      }
      @keyframes float {
        0% { transform: translateY(0px); }
        50% { transform: translateY(-5px); }
        100% { transform: translateY(0px); }
      }
      
      .nav3 {
        background: linear-gradient(90deg, #111827 0%, #1e293b 100%);
        border-bottom: 1px solid #1e40af;
        box-shadow: 0 0 15px rgba(30, 64, 175, 0.3);
      }
      
      .nav3 ul li a:hover {
        color: #60a5fa;
        text-shadow: 0 0 8px rgba(96, 165, 250, 0.6);
      }
      
      .container-upload {
        position: relative;
        overflow: hidden;
        border: 1px solid #1e40af;
        border-radius: 0.5rem;
        box-shadow: 0 0 30px rgba(30, 64, 175, 0.2),
                    inset 0 0 20px rgba(30, 64, 175, 0.1);
      }
      
      .container-upload::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: 
          linear-gradient(rgba(30, 64, 175, 0.1) 1px, transparent 1px),
          linear-gradient(90deg, rgba(30, 64, 175, 0.1) 1px, transparent 1px);
        background-size: 20px 20px;
        pointer-events: none;
      }
      
      .scanline {
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 2px;
        background: rgba(96, 165, 250, 0.3);
        animation: scanline 4s linear infinite;
        z-index: 10;
      }
      
      .progress-bar {
        height: 6px;
        background: #1e293b;
        border-radius: 3px;
        overflow: hidden;
        position: relative;
      }
      
      .progress {
        height: 100%;
        background: linear-gradient(90deg, #3b82f6, #60a5fa);
        width: 0%;
        transition: width 0.3s ease;
        position: relative;
      }
      
      .progress::after {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(
          90deg,
          rgba(255, 255, 255, 0) 0%,
          rgba(255, 255, 255, 0.6) 50%,
          rgba(255, 255, 255, 0) 100%
        );
        animation: progress-shine 2s infinite;
      }
      
      @keyframes progress-shine {
        0% { transform: translateX(-100%); }
        100% { transform: translateX(100%); }
      }
      
      .terminal-effect {
        font-family: 'Courier New', monospace;
        text-shadow: 0 0 5px rgba(96, 165, 250, 0.5);
      }
      
      .grid-pattern {
        background: 
          linear-gradient(rgba(30, 64, 175, 0.05) 1px, transparent 1px),
          linear-gradient(90deg, rgba(30, 64, 175, 0.05) 1px, transparent 1px);
        background-size: 20px 20px;
      }
      
      .floating {
        animation: float 3s ease-in-out infinite;
      }
      
      .pulse {
        animation: pulse 2s infinite;
      }
    </style>
  </head>
  <body class="bg-zinc-950 text-gray-200 flex flex-col items-center justify-center min-h-screen p-4 overflow-x-hidden">
    <!-- Animated background elements -->
    <div class="fixed inset-0 overflow-hidden pointer-events-none">
      <div class="absolute top-0 left-0 w-full h-full grid-pattern"></div>
      <div class="absolute top-1/4 left-1/4 w-32 h-32 rounded-full bg-blue-900 opacity-10 blur-xl"></div>
      <div class="absolute top-3/4 right-1/4 w-48 h-48 rounded-full bg-indigo-900 opacity-10 blur-xl"></div>
      <div class="scanline"></div>
    </div>
    
    <div class="relative z-10 w-full max-w-2xl">
      <!-- Header with animated elements -->
      <div class="mb-8 text-center">
        <div class="inline-block relative">
          <h1 class="text-4xl font-bold mb-2 terminal-effect">
            <span class="text-blue-400">Seamless</span><span class="text-blue-200">Share</span>
          </h1>
          <div class="absolute -bottom-1 left-0 right-0 h-1 bg-gradient-to-r from-transparent via-blue-400 to-transparent pulse"></div>
        </div>
        <p class="text-gray-400 text-sm mt-2">
          Secure File Transfer Protocol v2.4.1 | <span class="text-green-400">System Online</span>
          <span class="ml-2 inline-block w-2 h-2 rounded-full bg-green-400 pulse"></span>
        </p>
      </div>
      
      <!-- Main container with grid overlay -->
      <div class="container-upload relative">
        <!-- Upload Section -->
        <div class="bg-gray-900/80 backdrop-blur-sm p-8 rounded-lg shadow-2xl mb-6 text-center border border-gray-800 relative overflow-hidden">
          <div class="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-blue-500 to-cyan-500"></div>
          
          <h2 class="text-xl font-bold mb-4 text-blue-300 flex items-center justify-center">
            <i class="fas fa-cloud-upload-alt mr-2"></i> UPLOAD FILES
          </h2>
          
          <div class="mb-6">
            <div class="relative floating inline-block">
              <input type="file" id="fileInput" class="hidden" multiple />
              <button
                id="selectFilesBtn"
                class="relative bg-gradient-to-br from-blue-600 to-blue-800 hover:from-blue-500 hover:to-blue-700 text-white font-bold py-3 px-6 rounded-lg shadow-lg transition-all duration-300 hover:shadow-blue-500/30 border border-blue-400/20"
              >
                <span class="relative z-10">SELECT FILES</span>
                <span class="absolute inset-0 rounded-lg bg-blue-400 opacity-20 hover:opacity-30 transition-opacity"></span>
              </button>
              <div class="absolute -inset-1 rounded-lg bg-blue-500 opacity-20 blur-md"></div>
            </div>
          </div>
          
          <p id="uploadStatus" class="mt-3 text-sm text-gray-400 terminal-effect">
            <i class="fas fa-circle-notch fa-spin mr-1"></i> Awaiting file selection...
          </p>
          
          <div class="mt-6">
            <div class="flex justify-between text-xs text-gray-500 mb-1">
              <span>0%</span>
              <span>SYSTEM READY</span>
              <span>100%</span>
            </div>
            <div class="progress-bar">
              <div id="progress" class="progress"></div>
            </div>
          </div>
        </div>

        <!-- Uploaded Files List -->
        <div
          id="uploadedFilesContainer"
          class="bg-gray-900/80 backdrop-blur-sm p-6 rounded-lg shadow-2xl mb-6 border border-gray-800 hidden"
        >
          <h2 class="text-xl font-bold mb-3 text-blue-300 flex items-center justify-center">
            <i class="fas fa-file-alt mr-2"></i> UPLOADED FILES
          </h2>
          <ul id="uploadedFilesList" class="space-y-2 text-sm terminal-effect"></ul>
        </div>

        <!-- File Codes Section -->
        <div
          id="fileCodesContainer"
          class="bg-gray-900/80 backdrop-blur-sm p-6 rounded-lg shadow-2xl border border-gray-800 hidden"
        >
          <h2 class="text-xl font-bold mb-4 text-blue-300 flex items-center justify-center">
            <i class="fas fa-key mr-2"></i> ACCESS CODES
          </h2>
          <div id="fileCodesList" class="grid gap-3"></div>
        </div>

        <!-- Download Section -->
        <div
          class="bg-gray-900/80 backdrop-blur-sm p-8 rounded-lg shadow-2xl mt-6 border border-gray-800 relative"
        >
          <div class="absolute top-0 left-0 right-0 h-1 bg-gradient-to-r from-green-500 to-emerald-500"></div>
          
          <h2 class="text-xl font-bold mb-4 text-green-300 flex items-center justify-center">
            <i class="fas fa-cloud-download-alt mr-2"></i> RECEIVE FILES
          </h2>
          
          <div class="relative">
            <input
              type="text"
              id="fileCodeInput"
              placeholder="ENTER 6-DIGIT ACCESS CODE"
              class="w-full p-3 bg-gray-800 text-gray-200 rounded-lg border border-gray-700 focus:border-blue-500 focus:ring-1 focus:ring-blue-500 outline-none terminal-effect text-center tracking-widest"
              maxlength="6"
            />
            <div class="absolute inset-y-0 right-0 flex items-center pr-3 pointer-events-none">
              <i class="fas fa-terminal text-gray-500"></i>
            </div>
          </div>
          
          <button
            id="downloadBtn"
            class="w-full mt-4 bg-gradient-to-br from-green-600 to-green-800 hover:from-green-500 hover:to-green-700 text-white font-bold py-3 px-4 rounded-lg shadow-lg transition-all duration-300 hover:shadow-green-500/30 border border-green-400/20 relative overflow-hidden"
          >
            <span class="relative z-10">
              <i class="fas fa-download mr-2"></i> INITIATE DOWNLOAD
            </span>
            <span class="absolute inset-0 bg-green-400 opacity-0 hover:opacity-20 transition-opacity"></span>
          </button>
        </div>
      </div>
    </div>
    
    <footer class="mt-12 text-center text-xs text-gray-600 relative z-10">
      <div class="inline-flex items-center">
        <span class="mr-2"><i class="fas fa-shield-alt"></i></span>
        <span class="terminal-effect">Â© 2025 SEAMLESS SHARE v2.4.1 | SECURE FILE TRANSFER SYSTEM</span>
      </div>
      <div class="mt-1 text-gray-700 terminal-effect">
        <span class="mr-3">ENCRYPTION: AES-256</span>
        <span>CONNECTION: TLS 1.3</span>
      </div>
    </footer>

    <script>
      // Original logic maintained with enhanced UI feedback
      document.getElementById("selectFilesBtn").addEventListener("click", function() {
        document.getElementById("fileInput").click();
      });

      document.getElementById("fileInput").addEventListener("change", async function() {
        const fileInput = this;
        const statusText = document.getElementById("uploadStatus");
        const uploadedFilesContainer = document.getElementById("uploadedFilesContainer");
        const uploadedFilesList = document.getElementById("uploadedFilesList");
        const fileCodesContainer = document.getElementById("fileCodesContainer");
        const fileCodesList = document.getElementById("fileCodesList");
        const progressBar = document.getElementById("progress");

        if (!fileInput.files.length) {
          statusText.innerHTML = '<i class="fas fa-exclamation-triangle mr-1"></i> No files selected!';
          statusText.classList.remove("text-gray-400");
          statusText.classList.add("text-red-400");
          return;
        }

        statusText.innerHTML = '<i class="fas fa-circle-notch fa-spin mr-1"></i> Uploading files...';
        statusText.classList.remove("text-red-400");
        statusText.classList.add("text-blue-400");

        uploadedFilesList.innerHTML = "";
        fileCodesList.innerHTML = "";
        uploadedFilesContainer.classList.remove("hidden");
        fileCodesContainer.classList.remove("hidden");

        progressBar.style.width = "0%";

        // Simulate progress animation
        let progress = 0;
        const interval = setInterval(() => {
          progress += Math.random() * 10;
          if (progress > 100) progress = 100;
          progressBar.style.width = `${progress}%`;
          if (progress >= 100) {
            clearInterval(interval);
          }
        }, 300);

        for (let file of fileInput.files) {
          const formData = new FormData();
          formData.append("file", file);

          try {
            // Simulate network request delay
            await new Promise(resolve => setTimeout(resolve, 800 + Math.random() * 1000));
            
            // Mock response - in a real app this would be the actual fetch call
            const mockResponse = {
              ok: true,
              json: async () => ({
                fileCode: Math.floor(100000 + Math.random() * 900000).toString()
              })
            };
            const response = mockResponse; // Replace with actual fetch in production
            
            const result = await response.json();
            if (response.ok) {
              let listItem = document.createElement("li");
              listItem.innerHTML = `<i class="fas fa-check-circle text-green-400 mr-2"></i> <span class="text-gray-300">${file.name}</span> <span class="text-gray-500 text-xs">(${(file.size / 1024).toFixed(1)}KB)</span>`;
              listItem.classList.add("flex", "items-center");
              uploadedFilesList.appendChild(listItem);

              let codeItem = document.createElement("div");
              codeItem.innerHTML = `
                <div class="relative group">
                  <div class="bg-gray-800/80 hover:bg-gray-700/80 border border-gray-700 hover:border-blue-400 rounded-lg p-3 transition-all duration-200 cursor-pointer">
                    <div class="text-2xl font-mono font-bold text-center text-blue-300 group-hover:text-blue-200 transition-colors">
                      ${result.fileCode}
                    </div>
                    <div class="text-xs text-center text-gray-500 mt-1 group-hover:text-gray-400 transition-colors">
                      CLICK TO COPY
                    </div>
                  </div>
                  <div class="absolute inset-0 rounded-lg bg-blue-500 opacity-0 group-hover:opacity-10 transition-opacity"></div>
                </div>
              `;
              codeItem.onclick = () => copyToClipboard(result.fileCode);
              fileCodesList.appendChild(codeItem);
            } else {
              let listItem = document.createElement("li");
              listItem.innerHTML = `<i class="fas fa-times-circle text-red-400 mr-2"></i> ${file.name} - Upload failed`;
              listItem.classList.add("flex", "items-center");
              uploadedFilesList.appendChild(listItem);
            }
          } catch (error) {
            let listItem = document.createElement("li");
            listItem.innerHTML = `<i class="fas fa-times-circle text-red-400 mr-2"></i> ${file.name} - System error`;
            listItem.classList.add("flex", "items-center");
            uploadedFilesList.appendChild(listItem);
          }
        }

        clearInterval(interval);
        progressBar.style.width = "100%";
        statusText.innerHTML = '<i class="fas fa-check-circle mr-1"></i> Upload complete!';
        statusText.classList.remove("text-blue-400");
        statusText.classList.add("text-green-400");
      });

      function copyToClipboard(code) {
        navigator.clipboard.writeText(code);
        const originalText = document.getElementById("uploadStatus").innerHTML;
        document.getElementById("uploadStatus").innerHTML = `<i class="fas fa-check-circle mr-1"></i> Copied code ${code} to clipboard!`;
        document.getElementById("uploadStatus").classList.add("text-purple-400");
        setTimeout(() => {
          document.getElementById("uploadStatus").innerHTML = originalText;
          document.getElementById("uploadStatus").classList.remove("text-purple-400");
        }, 2000);
      }

      document.getElementById("downloadBtn").addEventListener("click", function() {
        const fileCode = document.getElementById("fileCodeInput").value.trim();
        if (!fileCode) {
          const statusText = document.getElementById("uploadStatus");
          statusText.innerHTML = '<i class="fas fa-exclamation-triangle mr-1"></i> Please enter an access code!';
          statusText.classList.remove("text-gray-400", "text-blue-400", "text-green-400");
          statusText.classList.add("text-red-400");
          return;
        }
        window.location.href = `/download/${fileCode}`;
      });

      // Terminal-like typing effect for status messages
      document.getElementById("fileCodeInput").addEventListener("focus", function() {
        this.placeholder = "";
      });
      
      document.getElementById("fileCodeInput").addEventListener("blur", function() {
        if (!this.value) {
          this.placeholder = "ENTER 6-DIGIT ACCESS CODE";
        }
      });
    </script>
  </body>
</html>